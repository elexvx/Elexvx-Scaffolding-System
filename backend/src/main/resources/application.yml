server:
  port: 8080 # 服务端口，默认 8080
  servlet:
    context-path: /api # 应用上下文路径，前端接口统一以 /api 开头

spring:
  main:
    banner-mode: console # 控制台显示 Banner
    log-startup-info: false # 是否打印启动信息日志
  datasource:
    # 数据库连接 URL（可通过 TDESIGN_DB_URL 覆盖）
    url: ${TDESIGN_DB_URL:jdbc:mysql://localhost:3306/tdesign?createDatabaseIfNotExist=true&useSSL=false&characterEncoding=utf8&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true}
    # 数据库用户名（可通过 TDESIGN_DB_USER 覆盖）
    username: ${TDESIGN_DB_USER:root}
    # 数据库密码（可通过 TDESIGN_DB_PASSWORD 覆盖）
    password: ${TDESIGN_DB_PASSWORD:123456}
    # 数据库驱动（可通过 TDESIGN_DB_DRIVER 覆盖）
    driver-class-name: ${TDESIGN_DB_DRIVER:com.mysql.cj.jdbc.Driver}
    # 数据库连接池类型（使用 Druid）
    type: com.alibaba.druid.pool.DruidDataSource
  flyway:
    enabled: false # 是否启用 Flyway 数据库迁移
  servlet:
    multipart:
      # 单个文件大小限制
      max-file-size: 20MB
      # 单次请求总文件大小限制
      max-request-size: 20MB
  data:
    redis:
      repositories:
        enabled: false # 禁用 Spring Data Redis Repositories

# Sa-Token 权限认证配置
sa-token:
  token-name: Authorization # token 名称（同时也是 cookie 名称）
  timeout: 2592000 # token 有效期，单位秒，默认 30 天
  is-concurrent: true # 是否允许同账号多端同时登录
  is-share: false # 同账号多端登录时是否共享 token
  is-log: false # 是否打印操作日志

# MyBatis 配置
mybatis:
  mapper-locations: classpath:/mappers/**/*.xml # Mapper XML 文件扫描路径
  configuration:
    map-underscore-to-camel-case: true # 开启下划线到驼峰转换

# 自定义配置
tdesign:
  db:
    # 数据库类型（mysql/postgresql/oracle/sqlserver）
    type: ${TDESIGN_DB_TYPE:mysql}
    # 数据库方言（用于 DDL 生成、SQL 兼容提示）
    dialect: ${TDESIGN_DB_DIALECT:mysql}
    # 连接模板（按需替换 spring.datasource.*）
    templates:
      mysql:
        url: jdbc:mysql://localhost:3306/tdesign?createDatabaseIfNotExist=true&useSSL=false&characterEncoding=utf8&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
        driver-class-name: com.mysql.cj.jdbc.Driver
        dialect: mysql
      postgresql:
        url: jdbc:postgresql://localhost:5432/tdesign
        driver-class-name: org.postgresql.Driver
        dialect: postgresql
      oracle:
        url: jdbc:oracle:thin:@localhost:1521/tdesign
        driver-class-name: oracle.jdbc.OracleDriver
        dialect: oracle
      sqlserver:
        url: jdbc:sqlserver://localhost:1433;databaseName=tdesign;encrypt=false
        driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDriver
        dialect: sqlserver
  system:
    version: ${TDESIGN_SYSTEM_VERSION:1.0.0}
    update-check-url: ${TDESIGN_UPDATE_CHECK_URL:}
  file:
    token-secret: ${FILE_TOKEN_SECRET:tdesign-file-token-secret} # 文件下载/预览的签名密钥
  security:
    captcha:
      enabled: true # 是否启用验证码（登录流程）
  # Redis 配置
  # 用于 Redis 监控与缓存（可选）
  redis:
    enabled: true # 是否启用 Redis 相关能力
    host: 127.0.0.1 # Redis 服务器地址
    port: 6379 # Redis 服务器端口
    password: "" # Redis 密码（没有可留空）
    timeout: 2000 # 连接超时时间（毫秒）
    database: 0 # 使用的数据库索引

aj:
  captcha:
    cache-type: local # 验证码缓存方式
    type: default # 验证码类型
    slip-offset: 5 # 滑块误差偏移
    aes-status: true # 是否启用 AES 加密
    interference-options: 2 # 干扰项强度
